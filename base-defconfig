CONFIG_EXPERT=y
CONFIG_DYNAMIC_DEBUG=y
CONFIG_PM_ADVANCED_DEBUG=y

CONFIG_FW_LOADER_COMPRESS=y
CONFIG_FW_LOADER_COMPRESS_ZSTD=y

CONFIG_BUILD_SALT=""

# General configuration
CONFIG_USER_NS=y

# Thermal
CONFIG_THERMAL=y
CONFIG_THERMAL_GOV_STEP_WISE=y
CONFIG_THERMAL_GOV_USER_SPACE=y

# Core temperature sensor
CONFIG_SENSORS_CORETEMP=y

# This default value (and many others) were changed by upstream commit:
#   410ce3dd5055b x86/config: Make the x86 defconfigs a bit more usable
# Disable it again.
# CONFIG_HYPERVISOR_GUEST is not set

# SElinux
CONFIG_SECURITY_SELINUX_DISABLE=y

# File systems
CONFIG_BTRFS_FS=y
CONFIG_BTRFS_FS_POSIX_ACL=y
CONFIG_FUSE_FS=m

# Required by Ubuntu snaps. Avoids a systemctl "degraded" state due to
# failed snap-*.mount (each snap package has one squashfs mount)
CONFIG_SQUASHFS=m
CONFIG_SQUASHFS_XATTR=y
CONFIG_SQUASHFS_ZLIB=y
CONFIG_SQUASHFS_LZ4=y
CONFIG_SQUASHFS_LZO=y
CONFIG_SQUASHFS_XZ=y
CONFIG_SQUASHFS_ZSTD=y

# Required to boot some Fedora spins with default settings.
CONFIG_DM_THIN_PROVISIONING=y
CONFIG_XFS_FS=y
CONFIG_IOSCHED_BFQ=y

# Memory management
CONFIG_FRONTSWAP=y

CONFIG_ZRAM=m
CONFIG_ZRAM_DEF_COMP_LZORLE=y
# CONFIG_ZRAM_DEF_COMP_LZ4 is not set
# CONFIG_ZRAM_DEF_COMP_LZO is not set
# CONFIG_ZRAM_DEF_COMP_LZ4HC is not set
# CONFIG_ZRAM_DEF_COMP_842 is not set
CONFIG_ZRAM_DEF_COMP="lzo-rle"

CONFIG_ZSWAP=y
CONFIG_ZSMALLOC=y
CONFIG_ZSWAP_COMPRESSOR_DEFAULT_LZO=y
CONFIG_ZSWAP_COMPRESSOR_DEFAULT="lzo"
CONFIG_ZSWAP_ZPOOL_DEFAULT_ZBUD=y
CONFIG_ZSWAP_ZPOOL_DEFAULT="zbud"

# build netconsole as module to configure it with /etc/modprobe.d
CONFIG_NETCONSOLE=m

# Need this when graphics fail (don't forget to drop "quiet splash"
# in the grub config)

# Even when graphics work, without a framebuffer console `chvt` still
# works but it is "blind" / with a frozen GUI instead! Incredibly
# confusing. Linux distributions expect this.
CONFIG_FB=y
CONFIG_FRAMEBUFFER_CONSOLE=y
# add support for using the EFI framebuffer as console
CONFIG_FB_EFI=y
# FB emulation appears to be needed for HDMI audio (!) support and
# it is not enabled default since 6.7.0-rc1
CONFIG_DRM_FBDEV_EMULATION=y

# sudo modprobe configs && zgrep SOF_DEBUG /proc/config.gz
CONFIG_IKCONFIG=m
CONFIG_IKCONFIG_PROC=y

# Enable OF match for PRP0001 ACPI devices
CONFIG_OF=y

# EFI
CONFIG_EFI_STUB=y
CONFIG_EFI_MIXED=y

# DEVMEM - disable strict for debug - don't use for distros!!
CONFIG_STRICT_DEVMEM=n

# NVME required on KBL NUC
CONFIG_NVME_CORE=y
CONFIG_BLK_DEV_NVME=y
# CONFIG_NVME_MULTIPATH is not set
CONFIG_NVME_FABRICS=m
CONFIG_NVME_FC=m

# USB3
CONFIG_USB_XHCI_HCD=m
CONFIG_USB_XHCI_DBGCAP=y
CONFIG_USB_XHCI_PCI=m
CONFIG_USB_XHCI_PLATFORM=m

# Gigabit Ethernet for MinnowBoard Turbot D0/ i211
CONFIG_IGB=m

# Override linux/arch/x86/configs/x86_64_deconfig:
# make them modules so they can be blocklisted when needed.
CONFIG_E100=m
CONFIG_E1000=m
CONFIG_E1000E=m

# WIFI
CONFIG_CFG80211_WEXT=y
CONFIG_MAC80211_RC_MINSTREL_VHT=y

CONFIG_WLAN_VENDOR_INTEL=y
# CONFIG_IPW2100 is not set
# CONFIG_IPW2200 is not set
# CONFIG_IWL4965 is not set
# CONFIG_IWL3945 is not set
CONFIG_IWLWIFI=m
CONFIG_IWLWIFI_LEDS=y
# CONFIG_IWLDVM is not set
CONFIG_IWLMVM=m
CONFIG_IWLWIFI_OPMODE_MODULAR=y
# CONFIG_IWLWIFI_BCAST_FILTERING is not set
# CONFIG_IWLWIFI_PCIE_RTPM is not set

#USB Net Adaptors (when WiFi fails)
CONFIG_USB_USBNET=m
CONFIG_USB_RTL8152=m

# MII PHY device drivers
CONFIG_ASIX_PHY=m

# LPSS
CONFIG_X86_INTEL_LPSS=y
CONFIG_MFD_CORE=m
CONFIG_MFD_INTEL_LPSS=m
CONFIG_MFD_INTEL_LPSS_ACPI=m
CONFIG_MFD_INTEL_LPSS_PCI=m

# GPIO
CONFIG_GPIOLIB=y
CONFIG_GPIO_ACPI=y
CONFIG_GPIOLIB_IRQCHIP=y
CONFIG_GPIO_SYSFS=y
CONFIG_GPIO_DEBUG=y

# PINCTRL
CONFIG_PINCTRL=y
CONFIG_PINCTRL_BAYTRAIL=y
CONFIG_PINCTRL_CHERRYVIEW=y
CONFIG_PINCTRL_BROXTON=y
CONFIG_PINCTRL_CANNONLAKE=y
CONFIG_PINCTRL_GEMINILAKE=y
CONFIG_PINCTRL_ICELAKE=y
CONFIG_PINCTRL_JASPERLAKE=y
CONFIG_PINCTRL_SUNRISEPOINT=y
CONFIG_PINCTRL_TIGERLAKE=y
# CONFIG_PINCTRL_ELKHARTLAKE=y
CONFIG_PINCTRL_ALDERLAKE=y

# DesignWare
CONFIG_DW_DMAC=y
CONFIG_DW_DMAC_PCI=y
CONFIG_I2C_DESIGNWARE_PLATFORM=y

# I2C
CONFIG_I2C_CHARDEV=y

# SPI
CONFIG_SPI=y
# CONFIG_SPI_DEBUG is not set
CONFIG_SPI_MASTER=y

CONFIG_REGMAP_SPI=y
CONFIG_SPI_DESIGNWARE=m
CONFIG_SPI_DW_PCI=m
CONFIG_SPI_DW_MID_DMA=y
CONFIG_SPI_DW_MMIO=m

# MMC (taken from Ubuntu)
CONFIG_TIFM_CORE=m
CONFIG_CB710_CORE=m

CONFIG_MMC=y
CONFIG_MMC_BLOCK=m
CONFIG_MMC_BLOCK_MINORS=8
CONFIG_SDIO_UART=m
# CONFIG_MMC_TEST is not set

#
# MMC/SD/SDIO Host Controller Drivers
#
# CONFIG_MMC_DEBUG is not set
CONFIG_MMC_SDHCI=m
CONFIG_MMC_SDHCI_PCI=m
CONFIG_MMC_RICOH_MMC=y
CONFIG_MMC_SDHCI_ACPI=m
CONFIG_MMC_SDHCI_PLTFM=m
CONFIG_MMC_TIFM_SD=m
# CONFIG_MMC_SPI is not set
CONFIG_MMC_SDRICOH_CS=m
CONFIG_MMC_CB710=m
CONFIG_MMC_VIA_SDMMC=m
CONFIG_MMC_VUB300=m
CONFIG_MMC_USHC=m
CONFIG_MMC_USDHI6ROL0=m
CONFIG_MMC_TOSHIBA_PCI=m
# CONFIG_MMC_MTK is not set
# CONFIG_MMC_SDHCI_XENON is not set
# CONFIG_MEMSTICK is not set

# SOUND
CONFIG_SOUND=m
CONFIG_SND=m
CONFIG_SND_VERBOSE_PRINTK=y
CONFIG_SND_DEBUG=y
CONFIG_SND_CTL_VALIDATION=y
# CONFIG_SND_DRIVERS is not set
# CONFIG_SND_SPI is not set
# CONFIG_SND_PCMCIA is not set
CONFIG_SND_SOC=m
CONFIG_SND_SOC_ACPI=m
CONFIG_SND_SOC_ACPI_INTEL_MATCH=m

# DRM
CONFIG_DRM=m
CONFIG_DRM_I915_ALPHA_SUPPORT=y

# Intel ME
CONFIG_INTEL_MEI=m
CONFIG_INTEL_MEI_ME=m
CONFIG_INTEL_MEI_TXE=m
CONFIG_INTEL_MEI_GSC=m
CONFIG_INTEL_MEI_GSC_PROXY=m

#
# Intel thermal drivers
#
CONFIG_INTEL_POWERCLAMP=m
CONFIG_X86_PKG_TEMP_THERMAL=m
CONFIG_INTEL_SOC_DTS_THERMAL=m

#
# ACPI INT340X thermal drivers
#
CONFIG_INT340X_THERMAL=m
CONFIG_INT3406_THERMAL=m
CONFIG_INTEL_PCH_THERMAL=m

#
# Generic IOMMU Pagetable Support
#
CONFIG_INTEL_IOMMU_SVM=y
CONFIG_IRQ_REMAP=y

# ELAN I2C touchpad support for Chromebooks
CONFIG_MOUSE_ELAN_I2C=m
CONFIG_MOUSE_ELAN_I2C_I2C=y
CONFIG_MOUSE_ELAN_SMBUS=y

# Touchpad support for ACER devices
CONFIG_HID_MULTITOUCH=m
CONFIG_ACPI_WMI=m
CONFIG_WMI_BMOF=m

# I2C touchpad (Dell, Asus and many other laptops)
CONFIG_I2C_HID=m
CONFIG_I2C_HID_ACPI=m
CONFIG_I2C_HID_CORE=m
CONFIG_INTEL_ISH_HID=m
CONFIG_INTEL_ISH_FIRMWARE_DOWNLOADER=m

# Touchpad support for Broadwell Samus (Pixelbook 2015)
CONFIG_TOUCHSCREEN_ATMEL_MXT=m
CONFIG_CHROME_PLATFORMS=y
CONFIG_CHROMEOS_LAPTOP=m
#CONFIG_CHROMEOS_PSTORE=m
#CONFIG_CROS_EC=m
#CONFIG_CROS_EC_LPC=m
#CONFIG_CROS_EC_PROTO=y
#CONFIG_CROS_KBD_LED_BACKLIGHT=m

# Buttons and LEDs
CONFIG_THINKPAD_ACPI=m
CONFIG_THINKPAD_ACPI_ALSA_SUPPORT=y

CONFIG_DELL_SMBIOS=m
CONFIG_DCDBAS=m
CONFIG_DELL_LAPTOP=m
CONFIG_DELL_WMI=m

CONFIG_LEDS_TRIGGERS=y
CONFIG_LEDS_TRIGGER_AUDIO=m

# USB Sound Card Support
CONFIG_SND_USB=y
CONFIG_SND_USB_AUDIO=m

# HDMI audio needed for BYT/CHT
CONFIG_HDMI_LPE_AUDIO=m

# Enable legacy audio drivers
CONFIG_SND_SOC_INTEL_CATPT=m
CONFIG_SND_SST_ATOM_HIFI2_PLATFORM_ACPI=m
CONFIG_SND_SOC_INTEL_SKYLAKE=m
CONFIG_SND_SOC_INTEL_SKYLAKE_HDAUDIO_CODEC=y

# needed for Broadwell
CONFIG_ACPI_REV_OVERRIDE_POSSIBLE=n

# Suspend-resume support on Broadwell Samus (Pixelbook 2015)
CONFIG_TCG_TPM=y
CONFIG_TCG_TIS_CORE=y
CONFIG_TCG_TIS=y
CONFIG_HW_RANDOM_TPM=y

# TigerLake support
CONFIG_PCI_IOV=y
CONFIG_VMD=m
CONFIG_PCIE_DW=y
CONFIG_PCIE_DW_HOST=y
CONFIG_PCIE_DW_PLAT=y
CONFIG_PCIE_DW_PLAT_HOST=y
CONFIG_INTEL_IDMA64=m

# Atheros WiFi
CONFIG_ATH_COMMON=m
CONFIG_WLAN_VENDOR_ATH=y
# CONFIG_ATH_DEBUG is not set
# CONFIG_ATH5K is not set
CONFIG_ATH5K_PCI=y
# CONFIG_ATH9K is not set
# CONFIG_ATH9K_HTC is not set
# CONFIG_CARL9170 is not set
# CONFIG_ATH6KL is not set
# CONFIG_AR5523 is not set
# CONFIG_WIL6210 is not set
CONFIG_ATH10K=m
CONFIG_ATH10K_CE=y
CONFIG_ATH10K_PCI=m
# CONFIG_ATH10K_SDIO is not set
# CONFIG_ATH10K_USB is not set
# CONFIG_ATH10K_DEBUG is not set
CONFIG_ATH10K_DEBUGFS=y
CONFIG_ATH10K_SPECTRAL=y
CONFIG_ATH10K_TRACING=y

# Touchpad fallback if i2c-hid is blacklisted (needed on some TGL devices)
CONFIG_INPUT_MOUSE=y
CONFIG_MOUSE_PS2=m

# Scheduling
# after 5.16-rc1, PREEMPT_VOLUNTARY is the default, but this raises problems
# with interrupts
# https://github.com/thesofproject/linux/issues/3283
# to be bug-compatible with previous releases, PREEMPT is selected explicitly.
# This should be removed when these issues are resolved.
CONFIG_PREEMPT_NONE=n
CONFIG_PREEMPT_VOLUNTARY=n
CONFIG_PREEMPT=y

# Powertop wants devfreq
CONFIG_PM_DEVFREQ=y
CONFIG_DEVFREQ_GOV_SIMPLE_ONDEMAND=m
CONFIG_DEVFREQ_GOV_PERFORMANCE=m
CONFIG_DEVFREQ_GOV_POWERSAVE=m
CONFIG_DEVFREQ_GOV_USERSPACE=m
CONFIG_DEVFREQ_GOV_PASSIVE=m

# Panda Wireless wants RT2800
CONFIG_RT2X00=m
CONFIG_RT2800USB=m
CONFIG_RT2800USB_RT33XX=y
CONFIG_RT2800USB_RT35XX=y
CONFIG_RT2800USB_RT3573=y
CONFIG_RT2800USB_RT53XX=y
CONFIG_RT2800USB_RT55XX=y
CONFIG_RT2800USB_UNKNOWN=y

# some systems are locked to X86_X2APIC and can not fall back to the
#  legacy APIC modes if SGX or TDX are enabled in the BIOS
CONFIG_X86_X2APIC=y
